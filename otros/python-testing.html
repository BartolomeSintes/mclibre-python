<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <title>Python testing. Python. Bartolomé Sintes Marco. www.mclibre.org</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../varios/python.css" title="mclibre">
  <link rel="icon" href="../varios/favicon.ico">
  <link rel="stylesheet" href="../varios/prism-python.css">
  <script src="../varios/prism.js"></script>
</head>

<body>
  <h1>Mclibre Python Testing, comprobador de ejercicios</h1>

  <nav>
    <p>
      <a href="../index.html"><img src="../varios/iconos/icono-python.svg" alt="Índice de Python" title="Índice de Python" width="48" height="48"></a>
      <a href="#"><img src="../varios/iconos/icono-arrow-circle-up.svg" alt="Principio de la página" title="Principio de la página" width="36" height="36"></a>
    </p>

    <div class="toc">
      <h2>MPTC</h2>

      <ul>
        <li><a href="#que-es">Qué es</a></li>
        <li><a href="#como-utilizar">Usar MPTC en terminal</a></li>
        <li><a href="#como-funciona">Cómo funciona MPTC</a></li>
        <li><a href="#usar-vsc">Usar MPTC en VSCode</a></li>
        <li><a href="#detalles">Detalles a tener en cuenta</a></li>
      </ul>
    </div>
  </nav>

  <p>He empezado a crear Mclibre Python Testing en enero de 2019 y a lo largo del tercer trimestre del curso 2018/19 espero ir mejorando la herramienta, pero todavía tiene un carácter experimental.</p>

  <section id="que-es">
    <h2>Qué es Mclibre Python Testing</h2>

    <p>Mclibre Python Testing es una herramienta basada en <a href="https://docs.pytest.org/en/latest/">PyTest</a> pensada para ayudar a los alumnos a comprobar que han resuelto correctamente los ejercicios propuestos en este curso.</p>

    <p>Mclibre Python Testing es software libre publicado bajo licencia <a href="https://www.gnu.org/licenses/agpl-3.0.html">AGPLv3+</a>. El código fuente de esta herramienta se encuentra en <a href="https://github.com/BartolomeSintes/mclibre-python-testing">GitHub</a> y el programa se distribuye a través del <a href="https://pypi.org/project/mclibre-python-testing-client/">Python Package Index (PyPI)</a>.</p>

    <p>La herramienta tiene dos partes:</p>
    <ul>
      <li>Un programa de servidor que genera los parámetros de pruebas para PyTest.</li>
      <li>Un programa de cliente que solicita al servidor los parámetros de prueba para PyTest y que ejecuta PyTest con dichos parámetros y que muestra el resultado de las pruebas.</li>
    </ul>

    <p>El alumno sólo necesita instalar el programa cliente. El programa cliente requiere las bibliotecas <a href="https://docs.pytest.org/en/latest/">PyTest</a> y <a href="http://docs.python-requests.org/en/master/">Requests</a>, que se deben instalar previamente, como se comenta en la lección <a href="python-testing-instalacion.html">Instalación de MPTC</a>.</p>
  </section>

  <section id="como-utilizar">
    <h2>¿Cómo se utiliza Mclibre Python Testing Client?</h2>

    <p>En la lección <a href="python-testing-instalacion.html"> Instalación de Mclibre Python Testing Client (MPTC)</a> se comentan las diferentes opciones de instalación (como módulo de sistema o en entorno virtual) en diferentes sistemas operativos (Windows o Ubuntu).</p>

    <p>Una vez instalado MPTC, su uso es sencillo. Los pasos a realizar serían los siguientes:</p>

    <ol>
      <li>Elegir un ejercicio que incluya el identificador MPTC del ejercicio:
        <p>Los ejercicios para los que hay disponibles tests automáticos de MPTC se pueden identificar por el cuadro situado en la parte superior derecha del enunciado, como en el ejemplo siguiente:</p>

        <div style="border: 2px solid black; margin: 0 20px; padding: 5px; background-color: #eee">
          <h3 class="con-aside">Ejemplo de ejercicio - 1</h3>

          <aside class="aside-minienlace">
            <p>MPTC</p>
            <p>1001</p>
          </aside>

          <p>Escriba un programa que salude al mundo.</p>

          <div class="resultado-idle">
            <pre>
<span class="idle-resp">¡Hola, mundo!</span>
</pre>
          </div>
        </div>

        <p>El número del cuadro indica el identificador del ejercicio en MPTC. En el ejemplo anterior, el número sería 1001.</p>
      </li>
      <li>Escribir el programa:

        <p>Escriba el programa que resuelve el ejercicio, siguiendo la plantilla de la lección <a href="../lecciones/python-plantilla.html">Programa básico</a>. Este punto es muy importante, ya que sólo se pueden validar los programas que siguen esta plantilla.</p>

        <p>El programa correspondiente al ejemplo anterior podría ser el siguiente:</p>

        <div class="codigo">
          <pre>
<code class="language-python">def main():
    print("¡Hola, mundo!")


if __name__ == "__main__":
    main()</code>
</pre>
        </div>
      </li>
      <li>Abrir una ventana de terminal en el directorio que contiene el programa.
        <p>Este punto es muy importante, ya que sólo se pueden validar los programas desde el directorio que contiene el programa.</p>
        <div class="terminal">
          <pre class="command-line" data-prompt="C:\Users\...\programas>">
<code class="language-shell">&nbsp;</code>
</pre>
        </div>
      </li>
      <li>Comprobar el funcionamiento del programa manualmente:
        <p>Compruebe que el programa funciona correctamente ejecutando el programa (escriba la orden <strong>python nombre_del_programa.py</strong>, donde nombre_del_programa.py es el nombre del programa) y comparando el resultado con el enunciado.</p>
        <div class="terminal">
          <pre class="command-line" data-prompt="C:\Users\...\programas>" data-output="2">
<code class="language-shell">python p_1001.py
¡Hola, mundo!
</code>
</pre>
        </div>
      </li>
      <li>Comprobar el funcionamiento del programa con MPTC
        <p>En el terminal, escriba la orden <strong>mptc nombre_del_programa.py identificador_mptc</strong>, donde nombre_del_programa.py es el nombre del programa e identificador_mptc es el identificador MPTC del ejercicio:</p>
        <div class="terminal">
          <pre class="command-line" data-prompt="C:\Users\...\programas>">
<code class="language-shell">mptc p_1001.py 1001</code>
</pre>
        </div>
        <p>En el terminal, MPTC muestra tres grupos de mensajes:</p>
        <ul>
          <li>En el primer grupo (WELCOME), MPTC informa del número de tests que se van a realizar.</li>
          <li>En el segundo grupo (TESTS EXECUTION), MPTC informa del resultado de cada test a medida que se van ejecutando.</li>
          <li>En el tercer grupo, MPTC (RESULTS), MPTC muestra un resumen del resultado final.</li>
        </ul>

        <div class="terminal">
          <pre class="command-line" data-prompt="C:\Users\...\programas>" data-output="2-25">
  <code class="language-shell">mptc p_1001.py 1001
-+-+-+-+-+-+-+-+- MCLIBRE PYTHON TESTING -+-+-+-+-+-+-+-+-
-+-+-+-+-+-+-+-+-        WELCOME         -+-+-+-+-+-+-+-+-

1 test will be executed.

Please, wait until all tests have been executed.

A final report will be shown after.

-+-+-+-+-+-+-+-+-     TESTS EXECUTION    -+-+-+-+-+-+-+-+-

Running test 1. Please wait.
Test 1 passed.

-+-+-+-+-+-+-+-+- MCLIBRE PYTHON TESTING -+-+-+-+-+-+-+-+-
-+-+-+-+-+-+-+-+-         RESULTS        -+-+-+-+-+-+-+-+-

Tested program: p_1001.py
MPTC number:    1001

1 test has been executed.

All tests have been passed. Congratulations!

</code>
</pre>
        </div>
      </li>
      <li>Corregir en su caso los errores detectados
        <p>En caso de que falle alguno de los tests, MPTC muestra información sobre el error producido, que puede utilizarse para corregir el error.</p>
        <p>Por ejemplo, si el programa probado hubiera sido el siguiente:</p>
          <div class="codigo">
            <pre>
<code class="language-python">def main():
    print("Hola, mundo")


if __name__ == "__main__":
    main()</code>
</pre>
          </div>

          <p>... en el terminal, MPTC hubiera mostrado el siguiente resultado, que nos indica que el mensaje mostrado por el programa no es exactamente igual al solicitado en el enunciado (en este caso, faltan los signos de exclamación):</p>
            <div class="terminal">
              <pre class="command-line" data-prompt="C:\Users\...\programas>" data-output="2-29">
<code class="language-shell">mptc p_1001.py 1001
-+-+-+-+-+-+-+-+- MCLIBRE PYTHON TESTING -+-+-+-+-+-+-+-+-
-+-+-+-+-+-+-+-+-        WELCOME         -+-+-+-+-+-+-+-+-

1 test will be executed.

Please, wait until all tests have been executed.

A final report will be shown after.

-+-+-+-+-+-+-+-+-     TESTS EXECUTION    -+-+-+-+-+-+-+-+-

Running test 1. Please wait.
Test 1 failed.

-+-+-+-+-+-+-+-+- MCLIBRE PYTHON TESTING -+-+-+-+-+-+-+-+-
-+-+-+-+-+-+-+-+-         RESULTS        -+-+-+-+-+-+-+-+-

Tested program: p_1001.py
MPTC number:    1001

1 test has been executed.
0 test has been passed.
1 test has been failed.

Failed test:
  Expected result: "¡Hola, mundo!"
  Obtained result: "Hola, mundo"

</code>
</pre>
            </div>
      </li>
    </ol>
  </section>

  <section id="como-funciona">
    <h2>¿Cómo funciona Mclibre Python Testing Client (MPTC)?</h2>

    <p>Cuando se invoca Mclibre Python Testing Client (MPTC) realiza las siguientes operaciones:</p>

    <ul>
      <li>MPTC solicita al programa de servidor las pruebas a realizar. El servidor envía un número variable de pruebas. Cada prueba contiene:
        <ul>
          <li>unos valores de entrada (los que escribiría el usuario)</li>
          <li>unos valores aleatorios (en caso de que el programa genere valores aleatorios)</li>
          <li>los valores de salida que debería mostrar el programa para los valores de entrada o aleatorios anteriores.</li>
        </ul>
      </li>
      <li>MPTC ejecuta el programa del alumno tantas veces como pruebas se han recibido del servidor.</li>
      <li>En cada ejecución, MPTC suplanta al usuario y proporciona al programa los valores de entrada enviados por el servidor. MPTC también suplanta partes del programa, como por ejemplo cuando se generan valores aleatorios. MPTC recoge la salida del programa..</li>
      <li>MPTC compara la salida del programa con los valores esperados enviados por el servidor. Si coinciden exactamente la prueba se considera superada. Si hay cualquier diferencia la prueba se considera fallada. La diferencia puede ser importante (mensajes completamente distintos a los esperados, resultados numéricos incorrectos, etc.) o poco importante (erratas en algún mensaje como acentos, puntuación, espacios en blanco, mayúsculas, minúsculas, etc.),</li>
      <li>Finalmente, MPTC muestra un resumen del resultado de las pruebas: cuántas pruebas se han realizado, cuántas se han superado y cuántas han fallado. En el caso de las pruebas falladas, MPTC muestra los valores de entrada y aleatorios utilizados en la prueba y los valores de salida que no coinciden con los esperados. Si la diferencia que ha provocado el fracaso de la prueba es poco importante, el alumno puede corregir fácilmente el programa comparando el valor esperado con el obtenido. Si la diferencia es más importante, el alumno puede corregir el programa ayudándose de los valores de entrada que han provocado el fallo.</li>
    </ul>
  </section>

  <section id="usar-vsc">
    <h2>Cómo utilizar MPTC en Visual Studio Code</h2>

    <p>Los pasos para utilizar Mclibre Python Testing Client en Visual Studio Code son los siguientes:</p>
    <ul>
      <li>Elegir un ejercicio que incluya el identificador MPTC del ejercicio:
        <p>Los ejercicios para los que hay disponibles tests automáticos de MPTC se pueden identificar por el cuadro situado en la parte superior derecha del enunciado, como en el ejemplo siguiente:</p>

        <div style="border: 2px solid black; margin: 0 20px; padding: 5px; background-color: #eee">
          <h3 class="con-aside">Ejemplo de ejercicio - 1</h3>

          <aside class="aside-minienlace">
            <p>MPTC</p>
            <p>1001</p>
          </aside>

          <p>Escriba un programa que salude al mundo.</p>

          <div class="resultado-idle">
            <pre>
<span class="idle-resp">¡Hola, mundo!</span>
</pre>
          </div>
        </div>

        <p>El número del cuadro indica el identificador del ejercicio en MPTC. En el ejemplo anterior, el número sería 1001.</p>
      </li>
      <li>Escribir el programa:

        <p>Escriba el programa que resuelve el ejercicio, siguiendo la plantilla de la lección <a href="../lecciones/python-plantilla.html">Programa básico</a>.</p>

        <p>El programa correspondiente al ejemplo anterior podría ser el siguiente:</p>

        <div class="codigo">
          <pre>
<code class="language-python">def main():
    print("¡Hola, mundo!")


if __name__ == "__main__":
    main()</code>
</pre>
        </div>
      </li>
      <li>Abrir una ventana de terminal en el directorio que contiene el programa:
        <p>Para ello, haga clic derecho sobre el directorio y elija la opción "Abrir en termninal":</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-1.png" alt="VSC. Abrir terminal" width="1024" height="576">
        </p>
        <p>Se abrirá una ventana de terminal en el directorio:</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-2.png" alt="VSC. Abrir terminal" width="1024" height="576">
        </p>
      </li>
      <li>Comprobar el funcionamiento del programa manualmente:
        <p>Compruebe que el programa funciona correctamente ejecutando el programa (escriba la orden <strong>python nombre_del_programa.py</strong>, donde nombre_del_programa.py es el nombre del programa) y comparando el resultado con el enunciado.</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-3.png" alt="VSC. Ejecución de programa" width="1024" height="576">
        </p>
      </li>
      <li>Comprobar el funcionamiento del programa con MPTC
        <p>En el terminal, escriba la orden <strong>mptc nombre_del_programa.py identificador_mptc</strong>, donde nombre_del_programa.py es el nombre del programa e identificador_mptc es el identificador MPTC del ejercicio:</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-4.png" alt="VSC. Ejecutar MPTC" width="1024" height="576">
        </p>
        <p>En el terminal, MPTC muestra tres grupos de mensajes. En el primer grupo informa del número de tests que se van a realizar.</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-5.png" alt="VSC. Resultado MPTC" width="1024" height="576">
        </p>
        <p>En el segundo grupo, MPTC muestra la salida generada por pytest. Los mensajes de éxito se muestran en verde y los mensajes de fallo se muestran en rojo.</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-6.png" alt="VSC. Resultado MPTC" width="1024" height="576">
        </p>
        <p>En el tercer grupo, MPTC muestra el resultado de la prueba.</p>
        <p class="captura">
          <img src="../img/vscode/vsc-mptc-7.png" alt="VSC. Resultado MPTC" width="1024" height="576">
        </p>
      </li>
    </ul>
  </section>

  <section id="detalles">
    <h2>Detalles a tener en cuenta</h2>

    <h3>Si el primer argumento no es únicamente el nombre del fichero, MPTC no ejecuta los tests</h3>

    <p>Al llamar a MPTC, el primer argumento debe ser el nombre del fichero que contiene el programa. No pueden usarse ni caminos relativos ni absolutos. Si se utilizan caminos absolutos o relativos, se mostrará un mensaje de error, como en el ejemplo siguiente:</p>

    <div class="powershell">
      <pre>
<code class="language-shell">PS C:\Users\Barto\Documents\LMSGI Barto\Python\&gt;<span class="ps-program">mptc</span> pruebas\ejemplo_mptc_1000.py 1000
Error: Relative or absolute paths [pruebas\ejemplo_mptc_1000.py] are not allowed.
Please, execute MPTC from the directory where your program is located.</code>
</pre>
    </div>

  </section>

  <footer>
    <p class="ultmod">Última modificación de esta página: 12 de abril de 2019</p>

    <p class="licencia">
      <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES"><img src="../varios/iconos/icono-cc-by-sa.svg" alt="Licencia Creative Commons" title="Licencia Creative Commons BY-SA" width="120" height="42"></a><br>
      Esta página forma parte del curso <strong><a href="http://www.mclibre.org/consultar/python/">Introducción a la programación con Python</a></strong> por <a href="http://www.mclibre.org/">Bartolomé Sintes Marco</a><br>
      que se distribuye bajo una <a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/deed.es_ES">Licencia Creative Commons Reconocimiento-CompartirIgual 4.0 Internacional (CC BY-SA 4.0)</a>.
    </p>
  </footer>
</body>
</html>
